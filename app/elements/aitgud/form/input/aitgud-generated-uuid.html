<dom-module id="aitgud-generated-uuid">
    <template>
        <input type="hidden" name="[[name]]" value$="[[value]]" />
    </template>
</dom-module>
<script>
    (function() {
        'use strict';
        function generateUuid() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);
                return v.toString(16);
            });
        }
        Polymer({
            is: 'aitgud-generated-uuid',
            properties: {
                value: {
                    type: String,
                    value: generateUuid(),
                    observer: '_preventEmptyValue',
                    notify: true
                }
            },
            _preventEmptyValue: function() {
                if(!this.value) {
                    this.set('value', generateUuid())
                }
            }
        });
    })();
</script>